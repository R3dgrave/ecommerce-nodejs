tags:
  - name: Categories
    description: Gestión de categorías de productos

paths:
  /category:
    post:
      summary: Crea una nueva categoría
      tags:
        - Categories
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name: { type: string, example: "home appliances" }
      responses:
        201:
          description: Categoría creada exitosamente
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CategoryResponse"
        400:
          description: Error de validación
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        409:
          description: El nombre de la categoría ya existe
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    get:
      summary: Obtiene lista de categorías con paginación
      tags:
        - Categories
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema: { type: integer, minimum: 1, default: 1 }
        - in: query
          name: limit
          schema: { type: integer, minimum: 1, maximum: 100, default: 10 }
        - in: query
          name: name
          schema: { type: string }
          description: Filtrar por nombre
      responses:
        200:
          description: Lista de categorías
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CategoryListResponse"
        400:
          description: Error de validación
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /category/{id}:
    get:
      summary: Obtiene una categoría por ID
      tags:
        - Categories
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        200:
          description: Categoría encontrada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CategoryResponse"
        400:
          description: ID inválido
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        404:
          description: Categoría no encontrada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    put:
      summary: Actualiza una categoría
      tags:
        - Categories
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name: { type: string }
      responses:
        200:
          description: Categoría actualizada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CategoryResponse"
        400:
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        404:
          description: Categoría no encontrada
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    delete:
      summary: Elimina una categoría
      tags:
        - Categories
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: string }
      responses:
        200:
          description: Categoría eliminada exitosamente
        400:
          description: ID inválido
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        404:
          description: ID no encontrado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
